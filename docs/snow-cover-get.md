# GET /snow-cover

Получение данных снежного покрова (modsnow) по всем организациям за 3 даты.

## Аутентификация

Требуется JWT-токен в заголовке `Authorization: Bearer <token>`.

## Параметры запроса

| Параметр | Тип    | Обязательный | Описание                                      |
|----------|--------|--------------|-----------------------------------------------|
| `date`   | string | Нет          | Дата в формате `YYYY-MM-DD`. По умолчанию — сегодня. |

## Ответ

Возвращает данные за 3 периода относительно переданной даты:

- **today** — переданная дата (или сегодня)
- **yesterday** — день до переданной даты
- **year_ago** — год назад от переданной даты

Каждый период содержит `overall_cover` — среднее значение покрова по всем организациям (округлённое до 2 знаков), а также массив `items` с данными по каждой организации отдельно.

### 200 OK

```json
{
  "today": {
    "date": "2025-02-07",
    "overall_cover": 72.35,
    "items": [
      {
        "organization_id": 100,
        "organization_name": "Кластер \"Центр\"",
        "overall_cover": 85.5,
        "zones": [
          { "min_elev": 1000, "max_elev": 2000, "sca_pct": 90.1 },
          { "min_elev": 2000, "max_elev": 3000, "sca_pct": 95.3 }
        ],
        "resource_date": "2025-02-04"
      },
      {
        "organization_id": 97,
        "organization_name": "Кластер \"Восток\"",
        "overall_cover": 59.2,
        "zones": null,
        "resource_date": null
      }
    ]
  },
  "yesterday": {
    "date": "2025-02-06",
    "overall_cover": 71.80,
    "items": [...]
  },
  "year_ago": {
    "date": "2024-02-07",
    "overall_cover": 68.10,
    "items": [...]
  }
}
```

### Поля периода (`today` / `yesterday` / `year_ago`)

| Поле            | Тип          | Описание                                                        |
|-----------------|--------------|-----------------------------------------------------------------|
| `date`          | string       | Дата периода (`YYYY-MM-DD`)                                     |
| `overall_cover` | float / null | Среднее значение покрова по всем организациям. `null` если данных нет |
| `items`         | array        | Массив данных по каждой организации (может быть пустым `[]`)    |

### Поля элемента (`items[*]`)

| Поле                | Тип          | Описание                                             |
|---------------------|--------------|------------------------------------------------------|
| `organization_id`   | integer      | ID организации                                       |
| `organization_name` | string       | Название организации (бассейна)                      |
| `overall_cover`     | float / null | Общий процент снежного покрова организации            |
| `zones`             | array / null | Зоны высотности с процентом покрова по каждой зоне   |
| `resource_date`     | string / null| Дата исходных спутниковых данных (`YYYY-MM-DD`)      |

### Поля зоны (`zones[*]`)

| Поле       | Тип          | Описание                          |
|------------|--------------|-----------------------------------|
| `min_elev` | integer      | Минимальная высота зоны (м)       |
| `max_elev` | integer      | Максимальная высота зоны (м)      |
| `sca_pct`  | float / null | Процент снежного покрова в зоне   |

### 400 Bad Request

Неверный формат даты:

```json
{
  "error": "parameter 'date' must be in YYYY-MM-DD format"
}
```

### Пустой ответ

Если данных за запрошенные даты нет, возвращается 200 OK с пустыми массивами:

```json
{
  "today":     { "date": "2025-02-07", "overall_cover": null, "items": [] },
  "yesterday": { "date": "2025-02-06", "overall_cover": null, "items": [] },
  "year_ago":  { "date": "2024-02-07", "overall_cover": null, "items": [] }
}
```

## Примеры

```bash
# Данные за конкретную дату
curl -H "Authorization: Bearer <token>" \
  "https://example.com/snow-cover?date=2025-02-07"

# Данные за сегодня (date по умолчанию)
curl -H "Authorization: Bearer <token>" \
  "https://example.com/snow-cover"
```
